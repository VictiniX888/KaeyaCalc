(this.webpackJsonp=this.webpackJsonp||[]).push([[0],{69:function(e,t,a){"use strict";a.d(t,"a",(function(){return H}));var n=a(12),r=a.n(n),s=a(13),c=a.n(s),l=a(33),o=a.n(l),u=a(34),i=a.n(u),h=a(23),p=a.n(h),f=a(1),d=a.n(f),v=a(16),m=a(44),w=a(0),x=a.n(w),b=a(68),S=a(7),g=a(45),y=a(3),C=a(25),k=a.n(C),A=function(){function e(t){r()(this,e),this.name=t}return c()(e,[{key:"setBaseStats",value:function(e){var t;return d.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,d.a.awrap(e.get());case 2:(t=a.sent).exists?this.baseStats=t.data():console.log("WARN: Base stats for "+this.name+" not found!");case 4:case"end":return a.stop()}}),null,this,null,Promise)}},{key:"setStatCurveMapping",value:function(e){var t;return d.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,d.a.awrap(e.get());case 2:(t=a.sent).exists?this.statCurveMapping=t.data():console.log("WARN: Stat curve mapping for "+this.name+" not found!");case 4:case"end":return a.stop()}}),null,this,null,Promise)}},{key:"setAscensionBonuses",value:function(e){var t=this;return d.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return this.ascensionBonuses={},a.next=3,d.a.awrap(e.get());case 3:a.sent.forEach((function(e){t.ascensionBonuses[e.id]=e.data()}));case 5:case"end":return a.stop()}}),null,this,null,Promise)}},{key:"getStatsWithWeaponAt",value:function(e,t,a,n,r,s,c){var l,o;return d.a.async((function(u){for(;;)switch(u.prev=u.next){case 0:if(void 0===e){u.next=6;break}return u.next=3,d.a.awrap(e.getStatsAt(t,a,n));case 3:l=u.sent,u.next=7;break;case 6:l={baseHp:null,baseAtk:null,baseDef:null};case 7:return u.next=9,d.a.awrap(this.getStatsAt(r,s,c));case 9:return o=u.sent,u.abrupt("return",{InnateHp:o.baseHp,InnateAtk:o.baseAtk,InnateDef:o.baseDef,WeaponHp:l.baseHp,WeaponAtk:l.baseAtk,WeaponDef:l.baseDef});case 11:case"end":return u.stop()}}),null,this,null,Promise)}},{key:"getStatsAt",value:function(e,t,a){var n,r,s,c,l;return d.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:if(!(isNaN(e)||e<1||e>90)){o.next=8;break}return n={baseHp:null,baseAtk:null,baseDef:null},this.innateStats=n,this.level=e,this.hasAscended=t,o.abrupt("return",n);case 8:if(e!==this.level||t!==this.hasAscended){o.next=12;break}return o.abrupt("return",this.innateStats);case 12:return r={baseHp:this.baseStats.baseHp,baseAtk:this.baseStats.baseAtk,baseDef:this.baseStats.baseDef},o.next=15,d.a.awrap(this.getStatCurvesAtLevel(e,a));case 15:return s=o.sent,Object.entries(this.statCurveMapping).forEach((function(e){var t=k()(e,2),a=t[0],n=t[1],c=s[n];r[a]*=c})),c=e>80||80==e&&t?6:e>70||70==e&&t?5:e>60||60==e&&t?4:e>50||50==e&&t?3:e>40||40==e&&t?2:e>20||20==e&&t?1:0,void 0!==(l=this.ascensionBonuses[c])&&Object.entries(l).forEach((function(e){var t=k()(e,2),a=t[0],n=t[1];r[a]+=n})),this.innateStats=r,this.level=e,this.hasAscended=t,o.abrupt("return",r);case 24:case"end":return o.stop()}}),null,this,null,Promise)}},{key:"getStatCurvesAtLevel",value:function(e,t){var a;return d.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,d.a.awrap(t.doc(e.toString()).get());case 2:if(!(a=n.sent).exists){n.next=7;break}return n.abrupt("return",a.data());case 7:return console.log("WARN: Stat curves for level "+e+" not found"),n.abrupt("return",{});case 9:case"end":return n.stop()}}),null,null,null,Promise)}}]),e}(),E={fromFirestore:function(e,t){var a,n;return d.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return a=e.data(t),r.next=3,d.a.awrap(I(a.name,e.ref.collection("stats").doc("baseStats"),e.ref.collection("stats").doc("statCurves"),e.ref.collection("ascensionBonuses")));case 3:return n=r.sent,r.abrupt("return",n);case 5:case"end":return r.stop()}}),null,null,null,Promise)}};function I(e,t,a,n){var r;return d.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:return r=new A(e),s.next=3,d.a.awrap(r.setBaseStats(t));case 3:return s.next=5,d.a.awrap(r.setStatCurveMapping(a));case 5:return s.next=7,d.a.awrap(r.setAscensionBonuses(n));case 7:return s.abrupt("return",r);case 8:case"end":return s.stop()}}),null,null,null,Promise)}var W=function(){function e(t,a,n){r()(this,e),this.name=t,this.type=a,this.rank=n}return c()(e,[{key:"setBaseStats",value:function(e){var t;return d.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,d.a.awrap(e.get());case 2:(t=a.sent).exists?this.baseStats=t.data():console.log("WARN: Base stats for "+this.name+" not found!");case 4:case"end":return a.stop()}}),null,this,null,Promise)}},{key:"setStatCurveMapping",value:function(e){var t;return d.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,d.a.awrap(e.get());case 2:(t=a.sent).exists?this.statCurveMapping=t.data():console.log("WARN: Stat curve mapping for "+this.name+" not found!");case 4:case"end":return a.stop()}}),null,this,null,Promise)}},{key:"setAscensionBonuses",value:function(e){var t=this;return d.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return this.ascensionBonuses={},a.next=3,d.a.awrap(e.get());case 3:a.sent.forEach((function(e){t.ascensionBonuses[e.id]=e.data()}));case 5:case"end":return a.stop()}}),null,this,null,Promise)}},{key:"getStatsAt",value:function(e,t,a){var n,r,s,c,l;return d.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:if(!(isNaN(e)||e<1||this.rank<=2&&e>70||e>90)){o.next=8;break}return n={baseHp:null,baseAtk:null,baseDef:null},this.stats=n,this.weaponLevel=e,this.hasAscended=t,o.abrupt("return",n);case 8:if(e!==this.weaponLevel||t!==this.hasAscended){o.next=12;break}return o.abrupt("return",this.stats);case 12:return r={baseHp:0,baseAtk:this.baseStats.baseAtk,baseDef:0},o.next=15,d.a.awrap(this.getStatCurvesAtLevel(e,a));case 15:return s=o.sent,Object.entries(this.statCurveMapping).forEach((function(e){var t=k()(e,2),a=t[0],n=t[1],c=s[n];r[a]*=c})),c=this.rank>2&&(e>80||80==e&&t)?6:this.rank>2&&(e>70||70==e&&t)?5:e>60||60==e&&t?4:e>50||50==e&&t?3:e>40||40==e&&t?2:e>20||20==e&&t?1:0,void 0!==(l=this.ascensionBonuses[c])&&Object.entries(l).forEach((function(e){var t=k()(e,2),a=t[0],n=t[1];r[a]+=n})),this.stats=r,this.weaponLevel=e,this.hasAscended=t,o.abrupt("return",r);case 24:case"end":return o.stop()}}),null,this,null,Promise)}},{key:"getStatCurvesAtLevel",value:function(e,t){var a;return d.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,d.a.awrap(t.doc(e.toString()).get());case 2:if(!(a=n.sent).exists){n.next=7;break}return n.abrupt("return",a.data());case 7:return console.log("WARN: Stat curves for level "+e+" not found"),n.abrupt("return",{});case 9:case"end":return n.stop()}}),null,null,null,Promise)}}]),e}(),L={fromFirestore:function(e,t){var a,n;return d.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return a=e.data(t),r.next=3,d.a.awrap(R(a.name,a.type,a.rank,e.ref.collection("stats").doc("baseStats"),e.ref.collection("stats").doc("statCurves"),e.ref.collection("ascensionBonuses")));case 3:return n=r.sent,r.abrupt("return",n);case 5:case"end":return r.stop()}}),null,null,null,Promise)}};function R(e,t,a,n,r,s){var c;return d.a.async((function(l){for(;;)switch(l.prev=l.next){case 0:return c=new W(e,t,a),l.next=3,d.a.awrap(c.setBaseStats(n));case 3:return l.next=5,d.a.awrap(c.setStatCurveMapping(r));case 5:return l.next=7,d.a.awrap(c.setAscensionBonuses(s));case 7:return l.abrupt("return",c);case 8:case"end":return l.stop()}}),null,null,null,Promise)}var D=a(41),P=a.n(D),N=(a(87),a(4).a.create({container:{display:"flex",flexDirection:"row",alignItems:"stretch",height:"100%",backgroundColor:"#fff"},inputColumn:{display:"flex",flexDirection:"column",padding:"1%",borderRightWidth:1,backgroundColor:"#ccc"},characterSelectRow:{display:"flex",flexDirection:"row",alignItems:"center",marginVertical:"0.25em"},characterSelect:{},levelInputRow:{display:"flex",flexDirection:"row",alignItems:"center",marginVertical:"0.25em"},levelInput:{width:"2em"},ascensionCheckRow:{display:"flex",flexDirection:"row",alignItems:"center",marginVertical:"0.25em"},resultColumn:{display:"flex",flexDirection:"column",flexGrow:1,padding:"1%",backgroundColor:"#eee"},characterImage:{marginVertical:"0.25em"},resultText:{marginVertical:"0.25em"}}));function B(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=p()(e);if(t){var r=p()(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return i()(this,a)}}var H=function(e){o()(a,e);var t=B(a);function a(){var e;r()(this,a),(e=t.call(this)).renderCharacterList=function(){var t=e.characters.sort((function(e,t){return e.localeCompare(t)}));return x.a.createElement(y.a,{style:N.characterSelectRow},x.a.createElement(S.a,null,"Character: "),x.a.createElement(v.a,{style:N.characterSelect,selectedValue:e.state.characterId,onValueChange:function(t,a){var n;return d.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:if(0==t){a.next=15;break}return a.next=3,d.a.awrap(e.db.collection("characters").doc(t).withConverter(E).get());case 3:if(!(n=a.sent).exists){a.next=14;break}return a.t0=e,a.t1=t,a.next=9,d.a.awrap(n.data());case 9:a.t2=a.sent,a.t3={characterId:a.t1,character:a.t2,characterHasInit:!0},a.t0.setState.call(a.t0,a.t3),a.next=15;break;case 14:console.log("WARN: Could not find data for character "+t);case 15:case"end":return a.stop()}}),null,null,null,Promise)}},x.a.createElement(v.a.Item,{label:"",value:0}),t.map((function(e){return x.a.createElement(v.a.Item,{label:e,value:e,key:e})}))))},e.renderWeaponList=function(){return x.a.createElement(y.a,{style:N.characterSelectRow},x.a.createElement(S.a,null,"Weapon: "),x.a.createElement(v.a,{style:N.characterSelect,selectedValue:e.state.weaponId,onValueChange:function(t,a){var n,r;return d.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:if(0==t){a.next=16;break}return n=e.weapons[t],a.next=4,d.a.awrap(e.db.collection("weapons").doc(n).collection(n+"s").doc(t).withConverter(L).get());case 4:if(!(r=a.sent).exists){a.next=15;break}return a.t0=e,a.t1=t,a.next=10,d.a.awrap(r.data());case 10:a.t2=a.sent,a.t3={weaponId:a.t1,weapon:a.t2},a.t0.setState.call(a.t0,a.t3),a.next=16;break;case 15:console.log("WARN: Could not find data for weapon "+t);case 16:case"end":return a.stop()}}),null,null,null,Promise)}},x.a.createElement(v.a.Item,{label:"",value:0}),Object.keys(e.weapons).map((function(e){return x.a.createElement(v.a.Item,{label:e,value:e,key:e})}))))},e.renderCharacterImage=function(){var t="https://rerollcdn.com/GENSHIN/Characters/"+e.state.character.name+".png";return x.a.createElement(b.a,{style:N.characterImage,source:{uri:t,width:70,height:70}})},e.setCharacterStats=function(){var t;return d.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,d.a.awrap(e.state.character.getStatsWithWeaponAt(e.state.weapon,e.state.weaponLevel,e.state.isWeaponAscended,e.dbWeaponStatCurveColRef,e.state.characterLevel,e.state.isCharacterAscended,e.dbCharStatCurveColRef));case 2:t=a.sent,e.setState({characterStats:t});case 4:case"end":return a.stop()}}),null,null,null,Promise)},e.hasCharacterParamsChanged=function(){var t=!1;return void 0!==e.state.character&&(t=t||(!isNaN(e.state.characterLevel)||!isNaN(e.state.character.level))&&e.state.characterLevel!=e.state.character.level||e.state.isCharacterAscended!=e.state.character.hasAscended),void 0!==e.state.weapon&&(t=t||(!isNaN(e.state.weaponLevel)||!isNaN(e.state.weapon.weaponLevel))&&e.state.weaponLevel!=e.state.weapon.weaponLevel||e.state.isWeaponAscended!=e.state.weapon.hasAscended),t},e.renderCharacterStats=function(){return e.hasCharacterParamsChanged()&&e.setCharacterStats(),x.a.createElement(y.a,null,e.state.character?x.a.createElement(y.a,null,e.renderCharacterImage(),x.a.createElement(S.a,{style:N.resultText},"Selected character: ",e.state.character?e.state.character.name:""),x.a.createElement(S.a,{style:N.resultText},"Character HP: ",e.state.characterStats&&null!=e.state.characterStats.InnateHp?Math.round(e.state.characterStats.InnateHp):"-"),x.a.createElement(S.a,{style:N.resultText},"Character ATK: ",e.state.characterStats&&null!=e.state.characterStats.InnateAtk?Math.round(e.state.characterStats.InnateAtk):"-"),x.a.createElement(S.a,{style:N.resultText},"Character DEF: ",e.state.characterStats&&null!=e.state.characterStats.InnateDef?Math.round(e.state.characterStats.InnateDef):"-")):null,x.a.createElement("br",null),e.state.weapon?x.a.createElement(y.a,null,x.a.createElement(S.a,{style:N.resultText},"Selected weapon: ",e.state.weapon?e.state.weapon.name:""),x.a.createElement(S.a,{style:N.resultText},"Weapon HP: ",e.state.characterStats&&null!=e.state.characterStats.WeaponHp?Math.round(e.state.characterStats.WeaponHp):"-"),x.a.createElement(S.a,{style:N.resultText},"Weapon ATK: ",e.state.characterStats&&null!=e.state.characterStats.WeaponAtk?Math.round(e.state.characterStats.WeaponAtk):"-"),x.a.createElement(S.a,{style:N.resultText},"Weapon DEF: ",e.state.characterStats&&null!=e.state.characterStats.WeaponDef?Math.round(e.state.characterStats.WeaponDef):"-")):null)};return P.a.apps.length||P.a.initializeApp({apiKey:"",authDomain:"",projectId:"",storageBucket:"",messagingSenderId:"",appId:""}),e.db=P.a.firestore(),e.state={hasLoaded:!1,characterId:void 0,character:void 0,characterHasInit:!1,characterLevel:1,isCharacterAscended:!1,weaponId:void 0,weapon:void 0,weaponLevel:1,isWeaponAscended:!1,characterStats:void 0},e}return c()(a,[{key:"componentDidMount",value:function(){var e,t,a;return d.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return this.dbCharStatCurveColRef=this.db.collection("characterStatCurves"),this.dbWeaponStatCurveColRef=this.db.collection("weaponStatCurves"),e=this.db.collection("init").doc("lists"),n.next=5,d.a.awrap(e.get());case 5:if(!(t=n.sent).exists){n.next=13;break}a=t.data(),this.characters=a.characters,this.weapons=a.weapons,this.setState({hasLoaded:!0}),n.next=15;break;case 13:return console.log("WARN: Initialization data not found. The page will not be able to load."),n.abrupt("return");case 15:case"end":return n.stop()}}),null,this,null,Promise)}},{key:"render",value:function(){var e=this;return this.state.hasLoaded?x.a.createElement(y.a,{style:N.container},x.a.createElement(y.a,{style:N.inputColumn},this.renderCharacterList(),x.a.createElement(y.a,{style:N.levelInputRow},x.a.createElement(S.a,null,"Level: "),x.a.createElement(g.a,{style:N.levelInput,defaultValue:this.state.characterLevel,onChangeText:function(t){e.setState({characterLevel:parseInt(t)})}})),x.a.createElement(y.a,{style:N.ascensionCheckRow},x.a.createElement(S.a,null,"Ascended? "),x.a.createElement(m.a,{onValueChange:function(t){return e.setState({isCharacterAscended:t})},value:this.state.isCharacterAscended})),x.a.createElement("br",null),this.renderWeaponList(),x.a.createElement(y.a,{style:N.levelInputRow},x.a.createElement(S.a,null,"Level: "),x.a.createElement(g.a,{style:N.levelInput,defaultValue:this.state.weaponLevel,onChangeText:function(t){e.setState({weaponLevel:parseInt(t)})}})),x.a.createElement(y.a,{style:N.ascensionCheckRow},x.a.createElement(S.a,null,"Ascended? "),x.a.createElement(m.a,{onValueChange:function(t){return e.setState({isWeaponAscended:t})},value:this.state.isWeaponAscended}))),x.a.createElement(y.a,{style:N.resultColumn},this.renderCharacterStats())):x.a.createElement(y.a,{style:N.container},x.a.createElement(S.a,null,"Loading..."))}}]),a}(w.Component)},70:function(e,t,a){e.exports=a(94)}},[[70,1,2]]]);
//# sourceMappingURL=app.a15d7a75.chunk.js.map