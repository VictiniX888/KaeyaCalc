{"version":3,"sources":["js/Character.js","js/Weapon.js","js/Stat.js","js/Artifact.js","js/Styles.js","App.js"],"names":["Character","name","this","dbBaseStatRef","a","async","get","doc","exists","baseStats","data","console","log","dbStatCurveRef","statCurveMapping","dbAscensionBonusRef","ascensionBonuses","forEach","id","weapon","weaponLevel","weaponHasAscended","dbWeaponStatCurveColRef","characterLevel","characterHasAscended","dbCharStatCurveColRef","getWeaponStatsAt","weaponStats","getInnateStatsAt","innateStats","Object","entries","map","stat","value","undefined","getStatsAt","level","hasAscended","dbStatCurveColRef","isNaN","keys","reduce","obj","getStatCurvesAtLevel","charStatCurves","curve","multiplier","ascensionLevel","bonus","toString","characterConverter","fromFirestore","snapshot","options","createCharacter","ref","collection","chararcter","character","setBaseStats","setStatCurveMapping","setAscensionBonuses","getTotalStatsAt","artifacts","getBaseStatsAt","artifactStats","artifact","getStats","combinedStats","totalStats","flatAtk","baseAtk","atkBonus","flatDef","baseDef","defBonus","flatHp","baseHp","hpBonus","critRate","critDmg","elementalMastery","energyRecharge","anemoDmgBonus","cryoDmgBonus","electroDmgBonus","geoDmgBonus","hydroDmgBonus","pyroDmgBonus","physicalDmgBonus","anemoRes","cryoRes","electroRes","geoRes","hydroRes","pyroRes","physicalRes","healingBonus","Weapon","type","rank","stats","weaponStatCurves","weaponConverter","createWeapon","getStatDisplayValue","isPercentage","toFixed","Math","round","convertStatValue","Artifact","mainStat","rawValue","NaN","subStats","statObj","statUtils","subStat","mainStatProps","Flower","Feather","Sands","Goblet","Circlet","subStatProps","StyleSheet","create","container","display","flexDirection","alignItems","fontSize","height","backgroundColor","inputColumn","padding","borderRightWidth","inputRow","marginVertical","levelInput","width","statInput","resultColumn","resultBlockNoBorder","resultBlock","borderBottomWidth","artifactBlockNoBorder","paddingTop","paddingBottom","artifactBlock","borderStyle","characterImage","titleText","fontWeight","artifactType","artifactStatType","resultText","fillerColumn","flexGrow","App","renderCharacterList","sortedChars","characters","sort","name1","name2","localeCompare","View","style","styles","Text","characterSelect","selectedValue","state","characterId","onValueChange","_","db","withConverter","setCharacterStats","setState","Item","label","key","renderWeaponList","weaponId","weaponType","weapons","weaponDoc","setWeaponStats","renderCharacterImage","imageUrl","Image","source","uri","isCharacterAscended","characterStats","setTotalStats","isWeaponAscended","setArtifact","artifactFlower","artifactFeather","artifactSands","artifactGoblet","artifactCirclet","renderCharacterStats","propMap","renderWeaponStats","renderArtifactMainStat","setStat","prop","TextInput","onChangeText","text","parseFloat","renderArtifactSubStats","index","renderArtifactStat","isLast","renderAllArtifactStats","renderTotalStats","firebase","apps","length","initializeApp","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","firestore","hasLoaded","dbInitRef","initSnapshot","props","defaultValue","parseInt","Checkbox","Component"],"mappings":"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","file":"static/js/app.987cfd9b.chunk.js","sourcesContent":["class Character {\n    constructor(name) {\n        this.name = name;\n    }\n\n    async setBaseStats(dbBaseStatRef) {\n        let doc = await dbBaseStatRef.get()\n        \n        if (doc.exists) {\n            this.baseStats = doc.data();\n        } else {\n            // doc.data() is undefined\n            console.log(`WARN: Base stats for ${this.name} not found!`);\n        }\n    }\n\n    async setStatCurveMapping(dbStatCurveRef) {\n        let doc = await dbStatCurveRef.get()\n\n        if (doc.exists) {\n            this.statCurveMapping = doc.data();\n        } else {\n            // doc.data() is undefined\n            console.log(`WARN: Stat curve mapping for ${this.name} not found!`);\n        }\n    }\n\n    async setAscensionBonuses(dbAscensionBonusRef) {\n        this.ascensionBonuses = {};\n        \n        let querySnapshot = await dbAscensionBonusRef.get()\n        querySnapshot.forEach(doc => {\n            // doc.data() is never undefined for query doc snapshots\n            this.ascensionBonuses[doc.id] = doc.data();\n        })\n    }\n\n\n\n    // Returns object containing base stats of character with the passed weapon\n    // Base stats = character innate stats + weapon stats\n    async getBaseStatsAt(weapon, weaponLevel, weaponHasAscended, dbWeaponStatCurveColRef, characterLevel, characterHasAscended, dbCharStatCurveColRef) {\n\n        let weaponStats = await this.getWeaponStatsAt(weapon, weaponLevel, weaponHasAscended, dbWeaponStatCurveColRef)\n\n        let innateStats = await this.getInnateStatsAt(characterLevel, characterHasAscended, dbCharStatCurveColRef);\n        \n        // Merges weaponStats and innateStats into a new baseStats object\n        let baseStats = {...weaponStats};\n        Object.entries(innateStats).map(([stat, value]) => {\n            if (baseStats[stat] === undefined) {\n                baseStats[stat] = value;\n            } else {\n                baseStats[stat] += value;\n            }\n        });\n        \n        return baseStats;\n    }\n\n    async getWeaponStatsAt(weapon, weaponLevel, weaponHasAscended, dbWeaponStatCurveColRef) {\n        let weaponStats;\n        if (weapon !== undefined) {\n            weaponStats = await weapon.getStatsAt(weaponLevel, weaponHasAscended, dbWeaponStatCurveColRef);\n        } else {\n            weaponStats = {};\n        }\n\n        return weaponStats;\n    }\n\n    // Returns an Object containing the character's innate total HP, Atk and Def, taking into account only their level and ascension\n    async getInnateStatsAt(level, hasAscended, dbStatCurveColRef) {\n        if (isNaN(level) || level < 1 || level > 90) {\n            // Return nulls if level is invalid\n            let innateStats;\n            if (this.innateStats !== undefined) {\n                // Copy all of innateStats' properties to a new object and initialize them to null\n                innateStats = Object.keys(this.innateStats).reduce((obj, stat) => {\n                    obj[stat] = null;\n                    return obj;\n                }, {});\n            } else {\n                innateStats = {};\n            }\n            \n            this.innateStats = innateStats;\n            this.level = level;\n            this.hasAscended = hasAscended;\n            \n            return innateStats;\n        } \n        // If getStatsAt has not been called before, this.level, this.hasAscended, and this.stats will be undefined\n        else if (level === this.level && hasAscended === this.hasAscended) {\n            // Don't recalculate stats if it has been calculated with the same parameters before\n            return this.innateStats;\n        } else {\n\n            // Initialize stats with character level 1 base stats\n            let innateStats = {...this.baseStats};\n\n            let charStatCurves = await this.getStatCurvesAtLevel(level, dbStatCurveColRef);\n\n            // Calculate stats from character level\n            Object.entries(this.statCurveMapping).forEach(([stat, curve]) => {\n                let multiplier = charStatCurves[curve];\n                innateStats[stat] *= multiplier;\n            });\n\n            // Calculate stats from character ascension\n            let ascensionLevel;\n            if (level > 80 || (level == 80 && hasAscended)) {\n                ascensionLevel = 6;\n            } else if (level > 70 || (level == 70 && hasAscended)) {\n                ascensionLevel = 5;\n            } else if (level > 60 || (level == 60 && hasAscended)) {\n                ascensionLevel = 4;\n            } else if (level > 50 || (level == 50 && hasAscended)) {\n                ascensionLevel = 3;\n            } else if (level > 40 || (level == 40 && hasAscended)) {\n                ascensionLevel = 2;\n            } else if (level > 20 || (level == 20 && hasAscended)) {\n                ascensionLevel = 1;\n            } else {\n                ascensionLevel = 0;\n            }\n            let ascensionBonuses = this.ascensionBonuses[ascensionLevel];\n\n            if (ascensionBonuses !== undefined) {\n                Object.entries(ascensionBonuses).forEach(([stat, bonus]) => {\n                    if (stat in innateStats) {\n                        innateStats[stat] += bonus;\n                    } else {\n                        innateStats[stat] = bonus;\n                    }\n                })\n            }\n\n            this.innateStats = innateStats;\n            this.level = level;\n            this.hasAscended = hasAscended;\n\n            return innateStats;\n        }\n    }\n\n    async getStatCurvesAtLevel(level, dbStatCurveColRef) {\n        let doc = await dbStatCurveColRef.doc(level.toString()).get();\n        if (doc.exists) {\n            return doc.data();\n        } else {\n            console.log(`WARN: Stat curves for level ${level} not found`);\n            return {};\n        }\n    }\n}\n\nexport const characterConverter = {\n    fromFirestore: async (snapshot, options) => {\n        const data = snapshot.data(options);\n        let chararcter = await createCharacter(\n            data.name,\n            snapshot.ref.collection('stats').doc('baseStats'),\n            snapshot.ref.collection('stats').doc('statCurves'), \n            snapshot.ref.collection('ascensionBonuses'),\n        );\n\n        return chararcter;\n    }\n}\n\nasync function createCharacter(name, dbBaseStatRef, dbStatCurveRef, dbAscensionBonusRef) {\n    let character = new Character(name);\n    await character.setBaseStats(dbBaseStatRef);\n    await character.setStatCurveMapping(dbStatCurveRef);\n    await character.setAscensionBonuses(dbAscensionBonusRef);\n\n    return character;\n}\n\n// Returns object containing the total stats of the character, weapon and artifacts\n// Ignores any of [character, weapon] that are undefined\nexport async function getTotalStatsAt(weapon, weaponLevel, weaponHasAscended, dbWeaponStatCurveColRef, character, characterLevel, characterHasAscended, dbCharStatCurveColRef, artifacts) {\n    \n    let baseStats;\n    if (character === undefined) {\n        if (weapon === undefined) {\n            baseStats = {};\n        } else {\n            baseStats = await weapon.getStatsAt(weaponLevel, weaponHasAscended, dbWeaponStatCurveColRef);\n        }\n    } else {\n        baseStats = await character.getBaseStatsAt(weapon, weaponLevel, weaponHasAscended, dbWeaponStatCurveColRef, characterLevel, characterHasAscended, dbCharStatCurveColRef);\n    }\n    \n    // Merge artifact bonuses into separate object\n    let artifactStats = {};\n    artifacts.forEach(artifact => {\n        Object.entries(artifact.getStats()).forEach(([stat, value]) => {\n            if (artifactStats[stat] === undefined) {\n                artifactStats[stat] = value;\n            } else {\n                artifactStats[stat] += value;\n            }\n        });\n    });\n\n    // Merge base stats and artifact bonuses\n    let combinedStats = {...baseStats};\n    Object.entries(artifactStats).forEach(([stat, value]) => {\n        if (combinedStats[stat] === undefined) {\n            combinedStats[stat] = value;\n        } else {\n            combinedStats[stat] += value;\n        }\n    });\n\n    // Calculate total stats\n    let totalStats = {};\n    totalStats.flatAtk = (combinedStats.baseAtk ? combinedStats.baseAtk : 0) \n        * (1 + (combinedStats.atkBonus ? combinedStats.atkBonus : 0))\n        + (combinedStats.flatAtk ? combinedStats.flatAtk : 0);\n    totalStats.flatDef = (combinedStats.baseDef ? combinedStats.baseDef : 0) \n        * (1 + (combinedStats.defBonus ? combinedStats.defBonus : 0))\n        + (combinedStats.flatDef ? combinedStats.flatDef : 0);\n    totalStats.flatHp = (combinedStats.baseHp ? combinedStats.baseHp : 0) \n        * (1 + (combinedStats.hpBonus ? combinedStats.hpBonus : 0))\n        + (combinedStats.flatHp ? combinedStats.flatHp : 0);\n    totalStats.critRate = combinedStats.critRate ? combinedStats.critRate : 0;\n    totalStats.critDmg = combinedStats.critDmg ? combinedStats.critDmg : 0;\n    totalStats.elementalMastery = combinedStats.elementalMastery ? combinedStats.elementalMastery : 0;\n    totalStats.energyRecharge = 1 + (combinedStats.energyRecharge ? combinedStats.energyRecharge : 0);\n    \n    combinedStats.anemoDmgBonus ? totalStats.anemoDmgBonus = combinedStats.anemoDmgBonus : null;\n    combinedStats.cryoDmgBonus ? totalStats.cryoDmgBonus = combinedStats.cryoDmgBonus : null;\n    combinedStats.electroDmgBonus ? totalStats.electroDmgBonus = combinedStats.electroDmgBonus : null;\n    combinedStats.geoDmgBonus ? totalStats.geoDmgBonus = combinedStats.geoDmgBonus : null;\n    combinedStats.hydroDmgBonus ? totalStats.hydroDmgBonus = combinedStats.hydroDmgBonus : null;\n    combinedStats.pyroDmgBonus ? totalStats.pyroDmgBonus = combinedStats.pyroDmgBonus : null;\n    combinedStats.physicalDmgBonus ? totalStats.physicalDmgBonus = combinedStats.physicalDmgBonus : null;\n\n    combinedStats.anemoRes ? totalStats.anemoRes = combinedStats.anemoRes : null;\n    combinedStats.cryoRes ? totalStats.cryoRes = combinedStats.cryoRes : null;\n    combinedStats.electroRes ? totalStats.electroRes = combinedStats.electroRes : null;\n    combinedStats.geoRes ? totalStats.geoRes = combinedStats.geoRes : null;\n    combinedStats.hydroRes ? totalStats.hydroRes = combinedStats.hydroRes : null;\n    combinedStats.pyroRes ? totalStats.pyroRes = combinedStats.pyroRes : null;\n    combinedStats.physicalRes ? totalStats.physicalRes = combinedStats.physicalRes : null;\n\n    combinedStats.healingBonus ? totalStats.healingBonus = combinedStats.healingBonus : null;\n\n    return totalStats;\n}","class Weapon {\n    constructor(name, type, rank) {\n        this.name = name;\n        this.type = type;\n        this.rank = rank;\n    }\n\n    async setBaseStats(dbBaseStatRef) {\n        let doc = await dbBaseStatRef.get()\n        \n        if (doc.exists) {\n            this.baseStats = doc.data();\n        } else {\n            // doc.data() is undefined\n            console.log(`WARN: Base stats for ${this.name} not found!`);\n        }\n    }\n\n    async setStatCurveMapping(dbStatCurveRef) {\n        let doc = await dbStatCurveRef.get()\n\n        if (doc.exists) {\n            this.statCurveMapping = doc.data();\n        } else {\n            // doc.data() is undefined\n            console.log(`WARN: Stat curve mapping for ${this.name} not found!`);\n        }\n    }\n\n    async setAscensionBonuses(dbAscensionBonusRef) {\n        this.ascensionBonuses = {};\n        \n        let querySnapshot = await dbAscensionBonusRef.get()\n        querySnapshot.forEach(doc => {\n            // doc.data() is never undefined for query doc snapshots\n            this.ascensionBonuses[doc.id] = doc.data();\n        })\n    }\n\n    // Returns an Object containing the weapons's HP, Atk and Def, taking into account only its level and ascension\n    async getStatsAt(weaponLevel, hasAscended, dbStatCurveColRef) {\n        if (isNaN(weaponLevel) || weaponLevel < 1 || (this.rank <= 2 && weaponLevel > 70) || weaponLevel > 90) {\n            // Return nulls if weapon level is invalid\n            let weaponStats;\n            if (this.stats !== undefined) {\n                // Copy all of stats' properties to a new object and initialize them to null\n                weaponStats = Object.keys(this.stats).reduce((obj, stat) => {\n                    obj[stat] = null;\n                    return obj;\n                }, {});\n            } else {\n                weaponStats = {};\n            }\n            \n            this.stats = weaponStats;\n            this.weaponLevel = weaponLevel;\n            this.hasAscended = hasAscended;\n\n            return weaponStats;\n        }\n        // If getStatsAt has not been called before, this.weaponLevel, this.hasAscended, and this.stats will be undefined\n        else if (weaponLevel === this.weaponLevel && hasAscended === this.hasAscended) {\n            // Don't recalculate stats if it has been calculated with the same parameters before\n            return this.stats;\n        } else {\n\n            // Level 1 weapon stats\n            let weaponStats = {...this.baseStats};\n\n            let weaponStatCurves = await this.getStatCurvesAtLevel(weaponLevel, dbStatCurveColRef);\n\n            // Calculate stats from weapon level\n            Object.entries(this.statCurveMapping).forEach(([stat, curve]) => {\n                let multiplier = weaponStatCurves[curve];\n                weaponStats[stat] *= multiplier;\n            });\n\n            // Calculate stats from weapon ascension\n            let ascensionLevel;\n            // Only 3-star and above weapons can be ascended beyond level 70\n            if (this.rank > 2 && (weaponLevel > 80 || (weaponLevel == 80 && hasAscended))) {\n                ascensionLevel = 6;\n            } else if (this.rank > 2 && (weaponLevel > 70 || (weaponLevel == 70 && hasAscended))) {\n                ascensionLevel = 5;\n            } else if (weaponLevel > 60 || (weaponLevel == 60 && hasAscended)) {\n                ascensionLevel = 4;\n            } else if (weaponLevel > 50 || (weaponLevel == 50 && hasAscended)) {\n                ascensionLevel = 3;\n            } else if (weaponLevel > 40 || (weaponLevel == 40 && hasAscended)) {\n                ascensionLevel = 2;\n            } else if (weaponLevel > 20 || (weaponLevel == 20 && hasAscended)) {\n                ascensionLevel = 1;\n            } else {\n                ascensionLevel = 0;\n            }\n            let ascensionBonuses = this.ascensionBonuses[ascensionLevel];\n            \n            if (ascensionBonuses !== undefined) {\n                Object.entries(ascensionBonuses).forEach(([stat, bonus]) => {\n                    if (stat in weaponStats) {\n                        weaponStats[stat] += bonus;\n                    } else {\n                        weaponStats[stat] = bonus;\n                    }\n                })\n            }\n\n            this.stats = weaponStats;\n            this.weaponLevel = weaponLevel;\n            this.hasAscended = hasAscended;\n\n            return weaponStats;\n        }\n    }\n\n    async getStatCurvesAtLevel(level, dbStatCurveColRef) {\n        let doc = await dbStatCurveColRef.doc(level.toString()).get();\n        if (doc.exists) {\n            return doc.data();\n        } else {\n            console.log(`WARN: Stat curves for level ${level} not found`);\n            return {};\n        }\n    }\n}\n\nexport const weaponConverter = {\n    fromFirestore: async (snapshot, options) => {\n        const data = snapshot.data(options);\n        let weapon = await createWeapon(\n            data.name,\n            data.type,\n            data.rank,\n            snapshot.ref.collection('stats').doc('baseStats'),\n            snapshot.ref.collection('stats').doc('statCurves'), \n            snapshot.ref.collection('ascensionBonuses'),\n        );\n\n        return weapon;\n    }\n}\n\nasync function createWeapon(name, type, rank, dbBaseStatRef, dbStatCurveRef, dbAscensionBonusRef) {\n    let weapon = new Weapon(name, type, rank);\n    await weapon.setBaseStats(dbBaseStatRef);\n    await weapon.setStatCurveMapping(dbStatCurveRef);\n    await weapon.setAscensionBonuses(dbAscensionBonusRef);\n\n    return weapon;\n}","// Returns the string to display as the value of a stat\nexport function getStatDisplayValue(value, isPercentage) {\n    if (value != null) {\n        if (isPercentage) {\n            return (value * 100).toFixed(1) + \"%\";\n        } else {\n            return Math.round(value);\n        }\n    } else {\n        return \"-\";\n    }\n};\n\n// Returns a Number representing the inputed value of a stat\n// Returns null if the input is not a valid stat value\nexport function convertStatValue(value, isPercentage) {\n    if (isPercentage) {\n        return value / 100;\n    } else {\n        return value;\n    }\n};\n","import * as statUtils from './Stat.js';\n\nexport default class Artifact {\n    mainStat = {\n        stat: 0,\n        rawValue: NaN,\n        value: NaN,\n    };\n\n    subStats = [\n        {\n            stat: 0,\n            rawValue: NaN,\n            value: NaN,\n        }, \n        {\n            stat: 0,\n            rawValue: NaN,\n            value: NaN,\n        }, \n        {\n            stat: 0,\n            rawValue: NaN,\n            value: NaN,\n        }, \n        {\n            stat: 0,\n            rawValue: NaN,\n            value: NaN,\n        }\n    ];\n\n    constructor(type) {\n        this.type = type;\n    }\n\n    // Can be called with one of the two of stat and value (the other will be undefined)\n    setStat(statObj, stat, value, isPercentage = false) {\n        if (stat == undefined && value != undefined) {\n            statObj.rawValue = value;\n            statObj.value = statUtils.convertStatValue(value, isPercentage);\n        } else if (stat != undefined && value == undefined) {\n            statObj.stat = stat;\n            statObj.value = statUtils.convertStatValue(statObj.rawValue, isPercentage);\n        } else if (stat != undefined && value != undefined) {\n            statObj.stat = stat;\n            statObj.rawValue = value;\n            statObj.value = statUtils.convertStatValue(value, isPercentage);\n        }\n    }\n\n    /*\n    setMainStat(stat, value, isPercentage = false) {\n        this.setStat(this.mainStat, stat, value, isPercentage);\n    }\n\n    // Set substat in a spefiic position\n    setSubStat(pos, stat, value, isPercentage = false) {\n        this.setStat(this.subStats[pos], stat, value, isPercentage);\n    }\n    */\n\n    // Returns object containing stat: value mapping, including both main stat and substats\n    getStats() {\n        let stats = {};\n\n        if (this.mainStat.stat != 0) {\n            if (!isNaN(this.mainStat.value)) {\n                stats[this.mainStat.stat] = this.mainStat.value;\n            } else {\n                stats[this.mainStat.stat] = null;\n            }\n        }\n        \n        this.subStats.forEach(subStat => {\n            if (subStat.stat != 0) {\n                if (!isNaN(subStat.value)) {\n                    stats[subStat.stat] = subStat.value;\n                } else {\n                    stats[subStat.stat] = null;\n                }\n            }\n        });\n\n        return stats;\n    }\n}\n\nexport const mainStatProps = {\n    Flower: [\n        'flatHp',\n    ],\n\n    Feather: [\n        'flatAtk',\n    ],\n\n    Sands: [\n        'hpBonus',\n        'atkBonus',\n        'defBonus',\n        'elementalMastery',\n        'energyRecharge',\n    ],\n\n    Goblet: [\n        'hpBonus',\n        'atkBonus',\n        'defBonus',\n        'elementalMastery',\n        'anemoDmgBonus',\n        'cryoDmgBonus',\n        'electroDmgBonus',\n        'geoDmgBonus',\n        'hydroDmgBonus',\n        'pyroDmgBonus',\n        'physicalDmgBonus',\n    ],\n\n    Circlet: [\n        'hpBonus',\n        'atkBonus',\n        'defBonus',\n        'elementalMastery',\n        'critRate',\n        'critDmg',\n        'healingBonus',\n    ],\n}\n\nexport const subStatProps = [\n    'flatHp',\n    'flatAtk',\n    'flatDef',\n    'hpBonus',\n    'atkBonus',\n    'defBonus',\n    'elementalMastery',\n    'energyRecharge',\n    'critRate',\n    'critDmg',\n]","import { StyleSheet } from 'react-native';\n\nexport default StyleSheet.create({\n    container: {\n        display: 'flex',\n        flexDirection: 'row',\n        alignItems: 'stretch',\n\n        fontSize: 14,\n\n        height: '100%',\n\n        backgroundColor: '#fff',\n    },\n\n    inputColumn: {\n        display: 'flex',\n        flexDirection: 'column',\n\n        padding: '1%',\n\n        borderRightWidth: 1,\n\n        backgroundColor: '#ccc',\n    },\n\n    inputRow: {\n        display: 'flex',\n        flexDirection: 'row',\n        alignItems: 'center',\n\n        marginVertical: '0.25em',\n    },\n\n    levelInput: {\n        width: '2em',\n    },\n\n    statInput: {\n        width: '3em',\n    },\n\n    resultColumn: {\n        display: 'flex',\n        flexDirection: 'column',\n\n        borderRightWidth: 1,\n\n        backgroundColor: '#eee',\n    },\n\n    resultBlockNoBorder: {\n        display: 'flex',\n        flexDirection: 'column',\n\n        padding: '0.8em',\n    },\n\n    resultBlock: {\n        display: 'flex',\n        flexDirection: 'column',\n\n        padding: '0.8em',\n        borderBottomWidth: 1,\n    },\n\n    artifactBlockNoBorder: {\n        display: 'flex',\n        flexDirection: 'column',\n        paddingTop: '0.5em',\n        paddingBottom: '0.7em',\n    },\n\n    artifactBlock: {\n        display: 'flex',\n        flexDirection: 'column',\n\n        paddingTop: '0.5em',\n        paddingBottom: '0.7em',\n\n        borderStyle: 'dashed',\n        borderBottomWidth: 1,  \n    },\n\n    characterImage: {\n        marginVertical: '0.25em',\n    },\n\n    titleText: {\n        fontSize: '1.5em',\n        fontWeight: '200',\n\n        marginVertical: '0.17em',\n    },\n\n    artifactType: {\n        fontSize: '1.2em',\n        fontWeight: '200',\n\n        marginVertical: '0.21em',\n    },\n\n    artifactStatType: {\n        marginVertical: '0.25',\n    },\n\n    resultText: {\n        marginVertical: '0.25em',\n    },\n\n    fillerColumn: {\n        flexGrow: 1,\n\n        backgroundColor: '#eee',\n    },\n});\n","import { Picker } from '@react-native-picker/picker';\nimport Checkbox from 'expo-checkbox';\nimport React, { Component } from 'react';\nimport { Image, Text, TextInput, View } from 'react-native';\n\nimport { characterConverter, getTotalStatsAt } from './js/Character.js';\nimport { weaponConverter } from './js/Weapon.js';\nimport Artifact, { mainStatProps, subStatProps } from './js/Artifact.js';\nimport * as statUtils from './js/Stat.js';\n\nimport firebase from 'firebase/app';\nimport 'firebase/firestore';\nimport { FIREBASE_APIKEY, FIREBASE_AUTHDOMAIN, FIREBASE_PROJECTID, FIREBASE_STORAGEBUCKET, FIREBASE_MESSAGINGSENDERID, FIREBASE_APPID } from '@env';\n\nimport styles from './js/Styles.js';\n\n\nexport default class App extends Component {\n\n  constructor() {\n    super();\n\n    // Initialize Firebase\n    const firebaseConfig = {\n      apiKey: FIREBASE_APIKEY,\n      authDomain: FIREBASE_AUTHDOMAIN,\n      projectId: FIREBASE_PROJECTID,\n      storageBucket: FIREBASE_STORAGEBUCKET,\n      messagingSenderId: FIREBASE_MESSAGINGSENDERID,\n      appId: FIREBASE_APPID,\n    }\n    if (!firebase.apps.length) {\n      firebase.initializeApp(firebaseConfig);\n    }\n\n    // Initialize Firestore\n    this.db = firebase.firestore();\n\n    this.state = {\n      hasLoaded: false,\n\n      characterId: undefined,\n      character: undefined,\n      characterLevel: 1,\n      isCharacterAscended: false,\n\n      weaponId: undefined,\n      weapon: undefined,\n      weaponLevel: 1,\n      isWeaponAscended: false,\n\n      characterStats: undefined,\n      weaponStats: undefined,\n      totalStats: undefined,\n\n      artifactFlower: new Artifact('Flower'),\n      artifactFeather: new Artifact('Feather'),\n      artifactSands: new Artifact('Sands'),\n      artifactGoblet: new Artifact('Goblet'),\n      artifactCirclet: new Artifact('Circlet'),\n    }\n  }\n\n  // Called when component is mounted for the first time\n  async componentDidMount() {\n    // Get ref to stat curves\n    this.dbCharStatCurveColRef = this.db.collection('characterStatCurves');\n    this.dbWeaponStatCurveColRef = this.db.collection('weaponStatCurves');\n\n    // Get inititialization data (e.g. character and weapon list)\n    let dbInitRef = this.db.collection('init').doc('lists');\n    let initSnapshot = await dbInitRef.get();\n    if (initSnapshot.exists) {\n      let doc = initSnapshot.data();\n      this.characters = doc.characters; // Array of character names\n      this.weapons = doc.weapons;   // Object where key: weapon name and value: weapon type\n      this.propMap = doc.props;   // Object where key: prop and value: object\n      this.setState({ hasLoaded: true })\n    } else {\n      console.log('WARN: Initialization data not found. The page will not be able to load.');\n      return;\n    }\n  }\n\n  renderCharacterList = () => {\n    let sortedChars = this.characters.sort((name1, name2) => name1.localeCompare(name2));\n    \n    return (\n      <View style={styles.inputRow}>\n        <Text>Character: </Text>\n        <Picker \n          style={styles.characterSelect}\n          selectedValue={this.state.characterId}\n          onValueChange={async (value, _) => {\n            if (value != 0) {\n              let doc = await this.db.collection('characters').doc(value)\n                .withConverter(characterConverter)\n                .get()\n\n              if (doc.exists) {\n                this.setState({\n                  characterId: value,\n                  character: await doc.data(),\n                }, () => {\n                  // callback function from setstate\n                  this.setCharacterStats();\n                });\n              } else {\n                console.log(`WARN: Could not find data for character ${value}`);\n              }\n            }\n          }}\n        >\n          <Picker.Item label='' value={0} />\n          {sortedChars.map(name => <Picker.Item label={name} value={name} key={name} />)}\n        </Picker>\n      </View>\n    )\n  }\n\n  renderWeaponList = () => {\n    return (\n      <View style={styles.inputRow}>\n        <Text>Weapon: </Text>\n        <Picker\n          style={styles.characterSelect}\n          selectedValue={this.state.weaponId}\n          onValueChange={async (value, _) => {\n            if (value != 0) {\n              let weaponType = this.weapons[value];\n              let weaponDoc = await this.db.collection('weapons').doc(weaponType).collection(weaponType + 's').doc(value)\n                .withConverter(weaponConverter)\n                .get();\n\n              if (weaponDoc.exists) {\n                this.setState({\n                  weaponId: value,\n                  weapon: await weaponDoc.data(),\n                }, () => {\n                  // callback function from setstate\n                  this.setWeaponStats();\n                });\n              } else {\n                console.log(`WARN: Could not find data for weapon ${value}`);\n              }\n            }\n          }}\n        >\n          <Picker.Item label='' value={0} />\n          {Object.keys(this.weapons).map(name => <Picker.Item label={name} value={name} key={name} />)}\n        </Picker>\n      </View>\n    )\n  }\n\n  renderCharacterImage = () => {\n    let imageUrl = `https://rerollcdn.com/GENSHIN/Characters/${this.state.character.name}.png`\n    return (\n      <Image style={styles.characterImage} source={{uri: imageUrl, width: 70, height: 70}} />\n    )\n  }\n\n  setCharacterStats = async () => {\n    if (this.state.character !== undefined) {\n      let stats = await this.state.character.getInnateStatsAt(this.state.characterLevel, this.state.isCharacterAscended, this.dbCharStatCurveColRef);\n      this.setState({ characterStats: stats }, () => { this.setTotalStats() });\n    }\n  }\n\n  setWeaponStats = async () => {\n    if (this.state.weapon !== undefined) {\n      let stats = await this.state.weapon.getStatsAt(this.state.weaponLevel, this.state.isWeaponAscended, this.dbWeaponStatCurveColRef);\n      this.setState({ weaponStats: stats }, () => { this.setTotalStats() });\n    }\n  }\n\n  setArtifact = (type) => {\n    let artifact = this.state['artifact' + type];\n    this.setState({['artifact' + type]: artifact}, () => { this.setTotalStats() });\n  }\n\n  setTotalStats = async () => {\n    let artifacts = [this.state.artifactFlower, this.state.artifactFeather, this.state.artifactSands, this.state.artifactGoblet, this.state.artifactCirclet];\n\n    let stats = await getTotalStatsAt(\n      this.state.weapon, \n      this.state.weaponLevel, \n      this.state.isWeaponAscended, \n      this.dbWeaponStatCurveColRef,\n      this.state.character,\n      this.state.characterLevel,\n      this.state.isCharacterAscended,\n      this.dbCharStatCurveColRef,\n      artifacts,\n    );\n    \n    this.setState({ totalStats: stats });\n  }\n\n  /*\n  hasCharacterParamsChanged = () => {\n    let hasChanged = false;\n\n    if (this.state.character !== undefined) {\n      hasChanged = hasChanged || ((!isNaN(this.state.characterLevel) || !isNaN(this.state.character.level)) && this.state.characterLevel != this.state.character.level) || (this.state.isCharacterAscended != this.state.character.hasAscended);\n    }\n    \n    return hasChanged;\n  }\n\n  hasWeaponParamsChanged = () => {\n    let hasChanged = false;\n\n    if (this.state.weapon !== undefined) {\n      hasChanged = hasChanged || ((!isNaN(this.state.weaponLevel) || !isNaN(this.state.weapon.weaponLevel)) && this.state.weaponLevel != this.state.weapon.weaponLevel) || (this.state.isWeaponAscended != this.state.weapon.hasAscended);\n    }\n\n    return hasChanged;\n  }\n  */\n\n  renderCharacterStats = () => {\n    return (\n      this.state.character ? (\n        <View style={styles.resultBlock}>\n          <Text style={styles.titleText}>Character</Text>\n          {this.renderCharacterImage()}\n          <Text style={styles.resultText}>{this.state.character ? this.state.character.name : ''}</Text>\n          {\n            this.state.characterStats ? (\n              Object.entries(this.state.characterStats).map(([stat, value]) => {\n                return <Text style={styles.resultText} key={stat}>{this.propMap[stat].name}: {statUtils.getStatDisplayValue(value, this.propMap[stat].isPercentage)}</Text>\n              })\n            ) : null\n          }\n        </View>\n      ) : null\n    )\n  }\n\n  renderWeaponStats = () => {\n    return (\n      this.state.weapon ? (\n        <View style={styles.resultBlock}>\n          <Text style={styles.titleText}>Weapon</Text>\n          <Text style={styles.resultText}>{this.state.weapon ? this.state.weapon.name : ''}</Text>\n          {\n            this.state.weaponStats ? (\n              Object.entries(this.state.weaponStats).map(([stat, value]) => {\n                return <Text style={styles.resultText} key={stat}>{this.propMap[stat].name}: {statUtils.getStatDisplayValue(value, this.propMap[stat].isPercentage)}</Text>\n              })\n            ) : null\n          }\n        </View>\n      ) : null\n    )\n  }\n\n  renderArtifactMainStat = (type) => {\n    return (\n      <View style={styles.inputRow}>\n        <Picker\n          selectedValue={this.state['artifact' + type].mainStat.stat}\n          onValueChange={(stat, _) => {\n            if (stat != 0) {\n              let mainStat = this.state['artifact'+type].mainStat;\n              this.state['artifact' + type].setStat(mainStat, stat, undefined, this.propMap[stat].isPercentage);\n\n              // Force refresh\n              this.setArtifact(type);\n            }\n          }}\n        >\n          <Picker.Item label='' value={0} />\n          {mainStatProps[type].map(prop => <Picker.Item label={this.propMap[prop].name} value={prop} key={prop} />)}\n        </Picker>\n\n        <Text> : </Text>\n\n        <TextInput \n          style={styles.statInput} \n          onChangeText={text => {\n            let mainStat = this.state['artifact'+type].mainStat;\n            if (mainStat.stat) {\n              this.state['artifact' + type].setStat(mainStat, undefined, parseFloat(text), this.propMap[mainStat.stat].isPercentage);\n            } else {\n              // If stat type is not yet set\n              this.state['artifact' + type].setStat(mainStat, undefined, parseFloat(text), false);\n            }\n\n            // Force refresh\n            this.setArtifact(type);\n          }}\n        />\n      </View>\n    )\n  }\n\n  renderArtifactSubStats = (type) => {\n    return (\n      <View>\n        {\n          this.state['artifact' + type].subStats.map((subStat, index) => {\n            return (\n              <View style={styles.inputRow} key={index}>\n                <Picker\n                  selectedValue={subStat.stat}\n                  onValueChange={(stat, _) => {\n                    if (stat != 0) {\n                      this.state['artifact' + type].setStat(subStat, stat, undefined, this.propMap[stat].isPercentage);\n      \n                      // Force refresh\n                      this.setArtifact(type);\n                    }\n                  }}\n                >\n                  <Picker.Item label='' value={0} />\n                  {subStatProps.map(prop => <Picker.Item label={this.propMap[prop].name} value={prop} key={prop} />)}\n                </Picker>\n\n                <Text> : </Text>\n\n                <TextInput \n                  style={styles.statInput} \n                  onChangeText={text => {\n                    let stat = subStat.stat;\n                    if (stat) {\n                      this.state['artifact' + type].setStat(subStat, undefined, parseFloat(text), this.propMap[stat].isPercentage);\n                    } else {\n                      // If stat type is not yet set\n                      this.state['artifact' + type].setStat(subStat, undefined, parseFloat(text), false);\n                    }\n\n                    // Force refresh\n                    this.setArtifact(type);\n                  }}\n                />\n              </View>\n            )\n          })\n        }\n      </View>\n    )\n  }\n\n  renderArtifactStat = (type, isLast = false) => {\n    return (\n      <View style={isLast ? styles.artifactBlockNoBorder : styles.artifactBlock}>\n        <Text style={styles.artifactType}>{type}</Text>\n\n        <Text style={styles.artifactStatType}>Main Stat</Text>\n        {this.renderArtifactMainStat(type)}\n\n        <Text style={styles.artifactStatType}>Substats</Text>\n        {this.renderArtifactSubStats(type)}\n      </View>\n    )\n  }\n\n  renderAllArtifactStats = () => {\n    return (\n      <View style={styles.resultBlockNoBorder}>\n        <Text style={styles.titleText}>Artifacts</Text>\n        {this.renderArtifactStat('Flower')}\n        {this.renderArtifactStat('Feather')}\n        {this.renderArtifactStat('Sands')}\n        {this.renderArtifactStat('Goblet')}\n        {this.renderArtifactStat('Circlet', true)}\n      </View>\n    )\n  }\n\n  renderTotalStats = () => {\n    return (\n      <View style={styles.resultBlockNoBorder}>\n        <Text style={styles.titleText}>Stat Total</Text>\n        {\n          this.state.totalStats ? (\n            Object.entries(this.state.totalStats).map(([stat, value]) => {\n              return <Text style={styles.resultText} key={stat}>{this.propMap[stat].name}: {statUtils.getStatDisplayValue(value, this.propMap[stat].isPercentage)}</Text>\n            })\n          ) : null\n        }\n      </View>\n    )\n  }\n\n  render() {\n    if (this.state.hasLoaded) {\n      return (\n        <View style={styles.container}>\n          <View style={styles.inputColumn}>\n            {this.renderCharacterList()}\n\n            <View style={styles.inputRow}>\n              <Text>Level: </Text>\n              <TextInput \n                style={styles.levelInput}\n                defaultValue={this.state.characterLevel} \n                onChangeText={text => {\n                  this.setState({characterLevel: parseInt(text)}, () => { this.setCharacterStats() });\n                }}\n              />\n            </View>\n\n            <View style={styles.inputRow}>\n              <Text>Ascended? </Text>\n              <Checkbox\n                onValueChange={value => this.setState({isCharacterAscended: value}, () => { this.setCharacterStats() })}\n                value={this.state.isCharacterAscended}\n              />\n            </View>\n\n            <br/>\n\n            {this.renderWeaponList()}\n\n            <View style={styles.inputRow}>\n              <Text>Level: </Text>\n              <TextInput \n                style={styles.levelInput}\n                defaultValue={this.state.weaponLevel} \n                onChangeText={text => {\n                  this.setState({weaponLevel: parseInt(text)}, () => { this.setWeaponStats() });\n                }}\n              />\n            </View>\n\n            <View style={styles.inputRow}>\n              <Text>Ascended? </Text>\n              <Checkbox\n                onValueChange={value => this.setState({isWeaponAscended: value}, () => { this.setWeaponStats() })}\n                value={this.state.isWeaponAscended}\n              />\n            </View>\n\n          </View>\n\n          <View style={styles.resultColumn}>\n            {this.renderCharacterStats()}\n            {this.renderWeaponStats()}\n            {this.renderAllArtifactStats()}\n          </View>\n\n          <View style={styles.resultColumn}>\n            {this.renderTotalStats()}\n          </View>\n\n          <View style={styles.fillerColumn}>\n          </View>\n\n        </View>\n      )\n    } else {\n      return (\n        <View style={styles.container}>\n          <Text>Loading...</Text>\n        </View>\n      )\n    }\n  }\n}\n\n\n"],"sourceRoot":""}